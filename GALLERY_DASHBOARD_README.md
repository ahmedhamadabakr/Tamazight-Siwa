# لوحة التحكم الخاصة بمعرض الصور - Gallery Dashboard

## نظرة عامة
تم إنشاء لوحة تحكم شاملة لإدارة معرض الصور في موقع Tamazight Siwa. تتيح هذه اللوحة للمديرين إدارة الصور بشكل كامل من إضافة وتعديل وحذف وتنظيم.

## الميزات الرئيسية

### 1. عرض الصور
- عرض جميع الصور في شكل شبكة (Grid Layout)
- معاينة الصور مع العنوان والوصف
- عرض حالة الصورة (نشط/غير نشط)
- تصنيف الصور حسب الفئات

### 2. إحصائيات المعرض
- إجمالي عدد الصور
- عدد الصور النشطة
- عدد الصور غير النشطة
- عدد الفئات المتاحة

### 3. البحث والتصفية
- البحث في عناوين ووصف الصور
- تصفية الصور حسب الفئة
- تحديث النتائج في الوقت الفعلي

### 4. إدارة الصور
- إضافة صور جديدة مع رفع الملفات
- تعديل معلومات الصور الموجودة
- حذف الصور
- تفعيل/إلغاء تفعيل الصور

### 5. الفئات المدعومة
- طبيعة
- تراث
- مناظر
- أنشطة
- طعام
- أخرى

## الملفات المنشأة

### 1. صفحات الواجهة
- `app/dashboard/[id]/gallery/page.tsx` - الصفحة الرئيسية للوحة التحكم
- `components/dashboard/gallery-form.tsx` - نموذج إضافة/تعديل الصور

### 2. API Endpoints
- `app/api/gallery/route.ts` - GET (جلب الصور) و POST (إضافة صورة جديدة)
- `app/api/gallery/[id]/route.ts` - GET, PUT, DELETE للصور الفردية
- `app/api/upload/route.ts` - رفع ملفات الصور

### 3. النماذج والأنواع
- `models/Gallery.ts` - تعريف نموذج الصورة والتحقق من صحة البيانات
- `types/next-auth.d.ts` - تعريف أنواع المصادقة

### 4. المكتبات المساعدة
- `lib/mongoose.ts` - اتصال قاعدة البيانات

## كيفية الاستخدام

### 1. الوصول للوحة التحكم
- يجب أن يكون المستخدم مسجل دخول بصلاحية "manager"
- الرابط: `/dashboard/[user-id]/gallery`

### 2. إضافة صورة جديدة
1. انقر على زر "إضافة صورة جديدة"
2. اختر ملف الصورة (PNG, JPG, GIF, WebP - حتى 10MB)
3. أدخل العنوان (مطلوب)
4. أدخل الوصف (اختياري)
5. اختر الفئة
6. حدد حالة النشاط
7. انقر "حفظ"

### 3. تعديل صورة موجودة
1. انقر على زر "تعديل" في بطاقة الصورة
2. قم بتعديل المعلومات المطلوبة
3. انقر "تحديث"

### 4. حذف صورة
1. انقر على زر "حذف" في بطاقة الصورة
2. أكد عملية الحذف

### 5. تفعيل/إلغاء تفعيل صورة
- انقر على زر "إظهار/إخفاء" لتغيير حالة النشاط

## الأمان والصلاحيات
- جميع العمليات محمية بمصادقة المستخدم
- فقط المستخدمون بصلاحية "manager" يمكنهم الوصول
- التحقق من صحة البيانات على مستوى الخادم والعميل
- رفع الملفات محدود بحجم 10MB وأنواع ملفات محددة

## التخزين
- الصور يتم رفعها إلى مجلد `public/uploads/gallery/`
- معلومات الصور يتم حفظها في قاعدة بيانات MongoDB في collection "gallery"

## التصميم المتجاوب
- تصميم متجاوب يعمل على جميع الأجهزة
- عرض مختلف للهواتف المحمولة والأجهزة اللوحية
- واجهة سهلة الاستخدام باللغة العربية

## المتطلبات التقنية
- Next.js 14+
- MongoDB
- NextAuth.js للمصادقة
- Tailwind CSS للتصميم
- Lucide React للأيقونات

## ملاحظات مهمة
1. تأكد من وجود متغير البيئة MONGODB_URI
2. تأكد من إعداد NextAuth بشكل صحيح
3. تأكد من وجود مجلد public/uploads/gallery/ مع الصلاحيات المناسبة
4. يُنصح بإعداد نسخ احتياطية دورية للصور المرفوعة

## التطوير المستقبلي
- إضافة إمكانية رفع صور متعددة
- إضافة معاينة مكبرة للصور
- إضافة إمكانية ترتيب الصور بالسحب والإفلات
- إضافة إحصائيات متقدمة
- إضافة إمكانية تصدير الصور